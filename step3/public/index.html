<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agent Orchestration Dashboard</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="shell">
      <header class="hero panel reveal">
        <p class="eyebrow">Local QA Console</p>
        <h1>Agent Orchestration Test Dashboard</h1>
        <p class="subtitle">
          UI에서 세션 실행, LLM 연결 점검, 테스트 명령 실행을 한 번에 검증합니다.
        </p>
      </header>

      <section class="panel reveal panel-third" aria-labelledby="diag-title">
        <div class="panel-head">
          <h2 id="diag-title">Diagnostics</h2>
          <button id="refresh-overview" type="button" class="button ghost">Refresh</button>
        </div>

        <div class="diag-grid">
          <button id="ping-health" type="button" class="button">App Health</button>
          <button id="ping-llm" type="button" class="button">LLM Ping</button>
        </div>

        <label for="ping-prompt" class="field-label">LLM Prompt</label>
        <input
          id="ping-prompt"
          type="text"
          value="Respond with one short line: ping accepted"
          autocomplete="off"
        />

        <label for="tool-command" class="field-label">Test Command</label>
        <div class="command-row">
          <input id="tool-command" type="text" value="pnpm test" autocomplete="off" />
          <button id="run-command" type="button" class="button">Run</button>
        </div>

        <pre id="diagnostics-output" class="console" aria-live="polite">No diagnostics yet.</pre>
      </section>

      <section class="panel reveal panel-third" aria-labelledby="run-title">
        <h2 id="run-title">Session Runner</h2>
        <form id="session-form" class="form-grid">
          <label for="session-preset">Session presets (10)</label>
          <select id="session-preset" aria-describedby="session-preset-help">
            <option value="">시나리오를 선택하세요</option>
          </select>
          <p id="session-preset-help" class="preset-help">
            선택 시 Task, File paths, Test command, Max attempts가 자동으로 채워집니다.
          </p>

          <label for="task">Task</label>
          <textarea id="task" required placeholder="예: src/utils/json.ts 버그 수정"></textarea>

          <label for="files">File paths (comma-separated)</label>
          <input id="files" required placeholder="src/utils/json.ts,tests/json.test.ts" />

          <label for="test">Test command</label>
          <input id="test" required value="pnpm test" />

          <label for="maxAttempts">Max attempts</label>
          <input id="maxAttempts" type="number" min="1" max="10" value="3" />

          <button id="start-session" type="submit" class="button wide">Start Session</button>
        </form>
      </section>

      <section class="panel reveal panel-third" aria-labelledby="list-title">
        <div class="panel-head">
          <h2 id="list-title">Recent Sessions</h2>
          <button id="refresh-sessions" type="button" class="button ghost">Reload</button>
        </div>
        <div id="sessions-list" class="sessions-list" role="list"></div>
      </section>

      <section class="panel panel-wide reveal" aria-labelledby="status-title">
        <h2 id="status-title">Session Status</h2>
        <pre id="status" class="console status">No session selected.</pre>
      </section>

      <section class="panel panel-wide reveal" aria-labelledby="phase-title">
        <div class="panel-head">
          <h2 id="phase-title">Phase Tracker</h2>
          <span id="phase-meta" class="phase-meta">No session selected.</span>
        </div>
        <div id="phase-tracker" class="phase-tracker" role="list"></div>
      </section>

      <section class="panel panel-wide reveal" aria-labelledby="prompts-title">
        <h2 id="prompts-title">Agent Prompt Logs</h2>
        <div id="prompt-logs" class="console prompt-logs" role="log" aria-live="polite"></div>
      </section>

      <section class="panel panel-wide reveal" aria-labelledby="events-title">
        <h2 id="events-title">Live Event Stream</h2>
        <div class="events-toolbar" role="group" aria-label="Event role filter">
          <label class="filter-chip">
            <input type="checkbox" data-role-filter value="supervisor" checked />
            Supervisor
          </label>
          <label class="filter-chip">
            <input type="checkbox" data-role-filter value="dev" checked />
            Dev
          </label>
          <label class="filter-chip">
            <input type="checkbox" data-role-filter value="test" checked />
            Test
          </label>
          <label class="filter-chip">
            <input type="checkbox" data-role-filter value="planner" checked />
            Planner
          </label>
          <label class="filter-chip">
            <input type="checkbox" data-role-filter value="architect" checked />
            Architect
          </label>
          <label class="filter-chip">
            <input type="checkbox" data-role-filter value="designer" checked />
            Designer
          </label>
        </div>
        <div id="events" class="console events" role="log" aria-live="polite"></div>
      </section>
    </main>

    <script src="/app.js" defer></script>
  </body>
</html>
